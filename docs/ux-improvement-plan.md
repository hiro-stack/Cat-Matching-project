# UX・画面改修計画：使いにくさ/不安ポイントの解消

**目的**: ユーザーに「状態」と「次の一手」を明確に示し、操作の不安を取り除く。

## 共通UX方針

1. **押下後の状態が必ず見える**: loading / success / error を全操作に統一
2. **次の一手が分かる**: 「今どの状態で、次に何が起こるか」を画面に固定表示
3. **エラーは“ユーザー文言”＋“サポート用ID”**: 原因不明でも行動できる導線（再試行/問い合わせ）

---

## 1. 管理者ダッシュボード / 管理画面のデザイン崩れ・見づらさ

### 問題

- スクショでレイアウト崩れが確認され、現場スタッフには負担。
- 画面幅・文字サイズ・表の折り返し・ボタン配置が不統一。
- 重要情報が表に詰め込まれすぎ（密度過多）。

### 原因仮説

- レスポンシブ未対応（固定幅、テーブル横溢れ）。
- Tailwind/Global CSS の競合。
- 独自CSSによる上書き。

### 対策（UI設計）

- **レイアウト規約の固定**:
  - コンテナ幅：`max-w-6xl` などに統一、左右余白確保。
  - 見出し/本文/補助テキストの階層（font-size, weight）を統一。
- **テーブル崩れ対策**:
  - 横溢れ：`overflow-x-auto` を必須化。
  - 列数を減らし、詳細は「詳細ページ/モーダル」へ。
  - 長文は `line-clamp` / `truncate` で省略。
- **操作導線を“右上固定”に統一**:
  - 主要アクション（追加/保存）を配置。
  - 危険操作（削除）は区別。

### 対策（実装）

- **共通 AdminLayout** (`DashboardLayout`等の改修): header / breadcrumb / action bar / content。
- **DataTable コンポーネント共通化**: 空状態/ローディング/エラー/ページネーション含む。

### 受け入れ条件

- 横スクロールせずに主要項目が読める。
- 画面幅が変わっても崩れない。
- 現場スタッフが「どこを見ればいいか」迷わない。

---

## 2. ボタン押下後のフィードバック不足（押したけど戻る/止まる）

### 問題

- “押したけど戻る/止まる”が頻発 → 反応してるか不明で不安。リトライや連打の原因。

### 原因仮説

- 非同期処理の状態管理が弱い（pending表示なし）。
- エラーハンドリングが未統一。
- API失敗時にUIを戻してしまう。

### 対策（UIの標準仕様）

- **ローディング**: ボタン disabled + spinner + 処理中…。
- **成功トースト**: 「保存しました」など具体的な文言。
- **失敗トースト + 画面内エラー**: 詳細（入力不備/権限/状態不一致）＋ 再試行導線。
- **リクエストID表示**: サポート用に `request_id` をエラーに含める。

### 実装（フロント）

- `useMutation` 相当の共通フック（fetch wrapper）または `api.ts` の拡張。
- 画面遷移前にトーストを表示、または遷移先にFlash Message。

### 実装（バックエンド）

- エラーJSONの統一（code, message, details）。

### 受け入れ条件

- 全ての主要操作でローディング、成功、失敗がわかる。
- 「押したのに無反応」がない。

---

## 3. 申請フローの説明不足（次に何が起きるか分からない）

### 問題

- 「待機してます…メールが届くのかな？」と不安になる。
- 申請後の状態がUIに出ていない。

### 原因仮説

- ステータス表示の欠如。
- メール依存の設計。

### 対策（情報設計）

- **申請ステータス画面（StatusCard）**:
  - 現在の状態（審査中など）。
  - 次に起こること（○営業日以内に通知など）。
  - ユーザーができること（修正、問い合わせ）。
- **ステップ表示**: 申請 → 審査 → 承認 のフロー可視化。
- **通知センター**: メール以外の通知手段。

### 実装案

- `/dashboard` に `StatusCard` を追加。
- 通知コンポーネントの導入。

### 受け入れ条件

- ユーザーが「今どこにいて、次に何が起きるか」を画面だけで理解できる。

---

## 着手計画

1. **操作フィードバック基盤（loading/toast/error）共通化**
2. **申請ステータス可視化（StatusCard + ステップ表示）**
3. **管理画面UIのレイアウト統一**
